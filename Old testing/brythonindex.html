<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IPv4 Header Decoder</title>
    <!-- Include Brython -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.10.5/brython.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.10.5/brython_stdlib.js"></script>
</head>
<body onload="brython()">
    <input id="binary_str" type="text" placeholder="Enter 160-bit binary string">
    <button id="decode_button">Decode</button>
    <pre id="output"></pre>

    <!-- Include your Python script -->
    <script type="text/python">
    from browser import document, alert

    def decode_ipv4_header(binary_str):
        fields = [
            ("Version", 4),
            ("IHL", 4),
            ("DSCP", 6),
            ("ECN", 2),
            ("Total Length", 16),
            ("Identification", 16),
            ("Flags", 3),
            ("Fragment Offset", 13),
            ("TTL", 8),
            ("Protocol", 8),
            ("Header Checksum", 16),
            ("Source IP Address", 32),
            ("Destination IP Address", 32)
        ]

        start = 0
        decoded_header = {}
        for field_name, bit_count in fields:
            bits = binary_str[start:start+bit_count]
            if "Address" in field_name:
                # Convert to IP address
                hex_val = hex(int(bits, 2))[2:].zfill(8)
                ip_address = ".".join(str(int(hex_val[i:i+2], 16)) for i in range(0, 8, 2))
                decoded_header[field_name] = ip_address
            else:
                hex_val = hex(int(bits, 2))[2:].zfill(bit_count // 4)
                decoded_header[field_name] = hex_val
            start += bit_count
        return decoded_header

    def decode():
        binary_str = document["binary_str"].value
        if len(binary_str) != 160:
            alert("Input should be a 160-bit binary string.")
            return
        decoded_header = decode_ipv4_header(binary_str)
        output = "\n".join(f"{k}: {v}" for k, v in decoded_header.items())
        document["output"].text = output

    document["decode_button"].bind("click", decode)
    </script>
</body>
</html>
